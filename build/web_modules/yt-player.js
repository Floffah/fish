var E;function h(){}h.prototype=Object.create(null);function o(){o.init.call(this)}o.EventEmitter=o,o.usingDomains=!1,o.prototype.domain=void 0,o.prototype._events=void 0,o.prototype._maxListeners=void 0,o.defaultMaxListeners=10,o.init=function(){this.domain=null,o.usingDomains&&E.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new h,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this};function m(e){return e._maxListeners===void 0?o.defaultMaxListeners:e._maxListeners}o.prototype.getMaxListeners=function(){return m(this)};function I(e,t,n){if(t)e.call(n);else for(var i=e.length,r=_(e,i),a=0;a<i;++a)r[a].call(n)}function C(e,t,n,i){if(t)e.call(n,i);else for(var r=e.length,a=_(e,r),s=0;s<r;++s)a[s].call(n,i)}function P(e,t,n,i,r){if(t)e.call(n,i,r);else for(var a=e.length,s=_(e,a),u=0;u<a;++u)s[u].call(n,i,r)}function T(e,t,n,i,r,a){if(t)e.call(n,i,r,a);else for(var s=e.length,u=_(e,s),l=0;l<s;++l)u[l].call(n,i,r,a)}function A(e,t,n,i){if(t)e.apply(n,i);else for(var r=e.length,a=_(e,r),s=0;s<r;++s)a[s].apply(n,i)}o.prototype.emit=function(t){var n,i,r,a,s,u,l,d=t==="error";if(u=this._events,u)d=d&&u.error==null;else if(!d)return!1;if(l=this.domain,d){if(n=arguments[1],l)n||(n=new Error('Uncaught, unspecified "error" event')),n.domainEmitter=this,n.domain=l,n.domainThrown=!1,l.emit("error",n);else{if(n instanceof Error)throw n;var y=new Error('Uncaught, unspecified "error" event. ('+n+")");throw y.context=n,y}return!1}if(i=u[t],!i)return!1;var f=typeof i=="function";r=arguments.length;switch(r){case 1:I(i,f,this);break;case 2:C(i,f,this,arguments[1]);break;case 3:P(i,f,this,arguments[1],arguments[2]);break;case 4:T(i,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(a=new Array(r-1),s=1;s<r;s++)a[s-1]=arguments[s];A(i,f,this,a)}return!0};function v(e,t,n,i){var r,a,s;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(a=e._events,a?(a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),s=a[t]):(a=e._events=new h,e._eventsCount=0),!s)s=a[t]=n,++e._eventsCount;else if(typeof s=="function"?s=a[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),!s.warned&&(r=m(e),r&&r>0&&s.length>r)){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,R(u)}return e}function R(e){typeof console.warn=="function"?console.warn(e):console.log(e)}o.prototype.addListener=function(t,n){return v(this,t,n,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,n){return v(this,t,n,!0)};function g(e,t,n){var i=!1;function r(){e.removeListener(t,r),i||(i=!0,n.apply(e,arguments))}return r.listener=n,r}o.prototype.once=function(t,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,g(this,t,n)),this},o.prototype.prependOnceListener=function(t,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,g(this,t,n)),this},o.prototype.removeListener=function(t,n){var i,r,a,s,u;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(r=this._events,!r)return this;if(i=r[t],!i)return this;if(i===n||i.listener&&i.listener===n)--this._eventsCount===0?this._events=new h:(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||n));else if(typeof i!="function"){for(a=-1,s=i.length;s-- >0;)if(i[s]===n||i[s].listener&&i[s].listener===n){u=i[s].listener,a=s;break}if(a<0)return this;if(i.length===1){if(i[0]=void 0,--this._eventsCount===0)return this._events=new h,this;delete r[t]}else k(i,a);r.removeListener&&this.emit("removeListener",t,u||n)}return this},o.prototype.removeAllListeners=function(t){var n,i;if(i=this._events,!i)return this;if(!i.removeListener)return arguments.length===0?(this._events=new h,this._eventsCount=0):i[t]&&(--this._eventsCount===0?this._events=new h:delete i[t]),this;if(arguments.length===0){for(var r=Object.keys(i),a=0,s;a<r.length;++a){if(s=r[a],s==="removeListener")continue;this.removeAllListeners(s)}return this.removeAllListeners("removeListener"),this._events=new h,this._eventsCount=0,this}if(n=i[t],typeof n=="function")this.removeListener(t,n);else if(n)do this.removeListener(t,n[n.length-1]);while(n[0]);return this},o.prototype.listeners=function(t){var n,i,r=this._events;return r?(n=r[t],n?typeof n=="function"?i=[n.listener||n]:i=O(n):i=[]):i=[],i},o.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):w.call(e,t)},o.prototype.listenerCount=w;function w(e){var t=this._events;if(t){var n=t[e];if(typeof n=="function")return 1;if(n)return n.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function k(e,t){for(var n=t,i=n+1,r=e.length;i<r;n+=1,i+=1)e[n]=e[i];e.pop()}function _(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function O(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}var M=Object.freeze({__proto__:null,default:o,EventEmitter:o});/*! load-script2. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var q=function(t,n,i){return new Promise((r,a)=>{const s=document.createElement("script");s.async=!0,s.src=t;for(const[l,d]of Object.entries(n||{}))s.setAttribute(l,d);s.onload=()=>{s.onerror=s.onload=null,r(s)},s.onerror=()=>{s.onerror=s.onload=null,a(new Error(`Failed to load ${t}`))};const u=i||document.head||document.getElementsByTagName("head")[0];u.appendChild(s)})};/*! yt-player. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const x=M.EventEmitter,L="https://www.youtube.com/iframe_api",b={"-1":"unstarted",0:"ended",1:"playing",2:"paused",3:"buffering",5:"cued"},p={INVALID_PARAM:2,HTML5_ERROR:5,NOT_FOUND:100,UNPLAYABLE_1:101,UNPLAYABLE_2:150},c=[];class N extends x{constructor(e,t){super();const n=typeof e=="string"?document.querySelector(e):e;n.id?this._id=n.id:this._id=n.id="ytplayer-"+Math.random().toString(16).slice(2,8),this._opts=Object.assign({width:640,height:360,autoplay:!1,captions:void 0,controls:!0,keyboard:!0,fullscreen:!0,annotations:!0,modestBranding:!1,related:!0,timeupdateFrequency:1e3,playsInline:!0,start:0},t),this.videoId=null,this.destroyed=!1,this._api=null,this._autoplay=!1,this._player=null,this._ready=!1,this._queue=[],this._interval=null,this._startInterval=this._startInterval.bind(this),this._stopInterval=this._stopInterval.bind(this),this.on("playing",this._startInterval),this.on("unstarted",this._stopInterval),this.on("ended",this._stopInterval),this.on("paused",this._stopInterval),this.on("buffering",this._stopInterval),this._loadIframeAPI((i,r)=>{if(i)return this._destroy(new Error("YouTube Iframe API failed to load"));this._api=r,this.videoId&&this.load(this.videoId,this._autoplay,this._start)})}load(e,t=!1,n=0){if(this.destroyed)return;if(this.videoId=e,this._autoplay=t,this._start=n,!this._api)return;if(!this._player){this._createPlayer(e);return}if(!this._ready)return;t?this._player.loadVideoById(e,n):this._player.cueVideoById(e,n)}play(){this._ready?this._player.playVideo():this._queueCommand("play")}pause(){this._ready?this._player.pauseVideo():this._queueCommand("pause")}stop(){this._ready?this._player.stopVideo():this._queueCommand("stop")}seek(e){this._ready?this._player.seekTo(e,!0):this._queueCommand("seek",e)}setVolume(e){this._ready?this._player.setVolume(e):this._queueCommand("setVolume",e)}getVolume(){return this._ready&&this._player.getVolume()||0}mute(){this._ready?this._player.mute():this._queueCommand("mute")}unMute(){this._ready?this._player.unMute():this._queueCommand("unMute")}isMuted(){return this._ready&&this._player.isMuted()||!1}setSize(e,t){this._ready?this._player.setSize(e,t):this._queueCommand("setSize",e,t)}setPlaybackRate(e){this._ready?this._player.setPlaybackRate(e):this._queueCommand("setPlaybackRate",e)}setPlaybackQuality(e){this._ready?this._player.setPlaybackQuality(e):this._queueCommand("setPlaybackQuality",e)}getPlaybackRate(){return this._ready&&this._player.getPlaybackRate()||1}getAvailablePlaybackRates(){return this._ready&&this._player.getAvailablePlaybackRates()||[1]}getDuration(){return this._ready&&this._player.getDuration()||0}getProgress(){return this._ready&&this._player.getVideoLoadedFraction()||0}getState(){return this._ready&&b[this._player.getPlayerState()]||"unstarted"}getCurrentTime(){return this._ready&&this._player.getCurrentTime()||0}destroy(){this._destroy()}_destroy(e){if(this.destroyed)return;this.destroyed=!0,this._player&&(this._player.stopVideo&&this._player.stopVideo(),this._player.destroy()),this.videoId=null,this._id=null,this._opts=null,this._api=null,this._player=null,this._ready=!1,this._queue=null,this._stopInterval(),this.removeListener("playing",this._startInterval),this.removeListener("paused",this._stopInterval),this.removeListener("buffering",this._stopInterval),this.removeListener("unstarted",this._stopInterval),this.removeListener("ended",this._stopInterval),e&&this.emit("error",e)}_queueCommand(e,...t){if(this.destroyed)return;this._queue.push([e,t])}_flushQueue(){for(;this._queue.length;){const e=this._queue.shift();this[e[0]].apply(this,e[1])}}_loadIframeAPI(e){if(window.YT&&typeof window.YT.Player=="function")return e(null,window.YT);c.push(e);const t=Array.from(document.getElementsByTagName("script")),n=t.some(r=>r.src===L);n||q(L).catch(r=>{for(;c.length;){const a=c.shift();a(r)}});const i=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{for(typeof i=="function"&&i();c.length;){const r=c.shift();r(null,window.YT)}}}_createPlayer(e){if(this.destroyed)return;const t=this._opts;this._player=new this._api.Player(this._id,{width:t.width,height:t.height,videoId:e,host:t.host,playerVars:{autoplay:t.autoplay?1:0,cc_load_policy:t.captions!=null?t.captions!==!1?1:0:void 0,hl:t.captions!=null&&t.captions!==!1?t.captions:void 0,cc_lang_pref:t.captions!=null&&t.captions!==!1?t.captions:void 0,controls:t.controls?2:0,disablekb:t.keyboard?0:1,enablejsapi:1,fs:t.fullscreen?1:0,iv_load_policy:t.annotations?1:3,modestbranding:t.modestBranding?1:0,origin:window.location.origin,playsinline:t.playsInline?1:0,rel:t.related?1:0,wmode:"opaque",start:t.start},events:{onReady:()=>this._onReady(e),onStateChange:n=>this._onStateChange(n),onPlaybackQualityChange:n=>this._onPlaybackQualityChange(n),onPlaybackRateChange:n=>this._onPlaybackRateChange(n),onError:n=>this._onError(n)}})}_onReady(e){if(this.destroyed)return;this._ready=!0,this.load(this.videoId,this._autoplay,this._start),this._flushQueue()}_onStateChange(e){if(this.destroyed)return;const t=b[e.data];if(t)["paused","buffering","ended"].includes(t)&&this._onTimeupdate(),this.emit(t),["unstarted","playing","cued"].includes(t)&&this._onTimeupdate();else throw new Error("Unrecognized state change: "+e)}_onPlaybackQualityChange(e){if(this.destroyed)return;this.emit("playbackQualityChange",e.data)}_onPlaybackRateChange(e){if(this.destroyed)return;this.emit("playbackRateChange",e.data)}_onError(e){if(this.destroyed)return;const t=e.data;if(t===p.HTML5_ERROR)return;if(t===p.UNPLAYABLE_1||t===p.UNPLAYABLE_2||t===p.NOT_FOUND||t===p.INVALID_PARAM)return this.emit("unplayable",this.videoId);this._destroy(new Error("YouTube Player Error. Unknown error code: "+t))}_onTimeupdate(){this.emit("timeupdate",this.getCurrentTime())}_startInterval(){this._interval=setInterval(()=>this._onTimeupdate(),this._opts.timeupdateFrequency)}_stopInterval(){clearInterval(this._interval),this._interval=null}}var U=N;export default U;
